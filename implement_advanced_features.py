#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
KOICA ì‹œë®¬ë ˆì´ì…˜ ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ ìŠ¤í¬ë¦½íŠ¸

1. ë¶€ì†Œì¥ Morale ì„ê³„ê°’ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
2. ì¥ê¸° ì˜í–¥ ì‹œìŠ¤í…œ (delayed_effects)
3. ìƒˆë¡œìš´ ì—”ë”© ì¡°ê±´
"""

import json
import sys
from pathlib import Path

def load_scenarios():
    """scenarios.json íŒŒì¼ ë¡œë“œ"""
    with open('scenarios.json', 'r', encoding='utf-8') as f:
        return json.load(f)

def save_scenarios(data):
    """scenarios.json íŒŒì¼ ì €ì¥"""
    with open('scenarios.json', 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)


# ============================================================
# 1. ë¶€ì†Œì¥ Morale ì„ê³„ê°’ ì´ë²¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
# ============================================================

DEPUTY_THRESHOLD_EVENTS = {
    "deputy_principled_high_loyalty": {
        "title": "ğŸŒŸ ê¹€ì›ì¹™ ë¶€ì†Œì¥ì˜ ì „í­ì  ì§€ì§€",
        "description": "ê¹€ì›ì¹™ ë¶€ì†Œì¥ì´ ì°¾ì•„ì˜µë‹ˆë‹¤. \"ì†Œì¥ë‹˜, ê·¸ë™ì•ˆ í•¨ê»˜ ì¼í•˜ë©´ì„œ ë§ì´ ë°°ì› ìŠµë‹ˆë‹¤. ì†Œì¥ë‹˜ì˜ ì›ì¹™ì ì¸ ë¦¬ë”ì‹­ ë•ë¶„ì— KOICAì˜ ì§„ì •í•œ ê°€ì¹˜ë¥¼ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.\"\n\nê·¸ëŠ” ìì‹ ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ë™ì›í•˜ì—¬ ì–´ë ¤ìš´ í”„ë¡œì íŠ¸ë¥¼ ì„±ì‚¬ì‹œì¼°ê³ , ë³¸ë¶€ì— ë‹¹ì‹ ì˜ ì—…ì ì„ ì ê·¹ í™ë³´í–ˆìŠµë‹ˆë‹¤. ì§ì›ë“¤ë„ ë¶€ì†Œì¥ì˜ í—Œì‹ ì ì¸ ëª¨ìŠµì— ê°ë™ë°›ì•„ ì‚¬ê¸°ê°€ í¬ê²Œ ì˜¬ëìŠµë‹ˆë‹¤.",
        "threshold_type": "principled",
        "threshold_value": 50,
        "one_time": True,
        "choices": [
            {
                "text": "ê°ì‚¬ë¥¼ í‘œí•˜ê³  í•¨ê»˜ ë” ë‚˜ì€ ì¡°ì§ì„ ë§Œë“¤ìê³  ê²©ë ¤",
                "result": {
                    "message": "\"ìš°ë¦¬ê°€ í•¨ê»˜ë¼ë©´ ë” í° ì¼ì„ í•´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\" ë‹¹ì‹ ì˜ ë§ì— ê¹€ì›ì¹™ ë¶€ì†Œì¥ì´ ê³ ê°œë¥¼ ë„ë•ì…ë‹ˆë‹¤. íŒ€ ì „ì²´ê°€ í•˜ë‚˜ë¡œ ë­‰ì³¤ìŠµë‹ˆë‹¤.",
                    "stats": {
                        "reputation": 8,
                        "staff_morale": 10,
                        "project_success": 5
                    },
                    "deputy_morale": {
                        "principled": 10
                    },
                    "advance_time": False,
                    "next": None
                }
            },
            {
                "text": "ë¶€ì†Œì¥ì—ê²Œ ì¤‘ìš”í•œ í”„ë¡œì íŠ¸ ì „ê¶Œ ìœ„ì„",
                "result": {
                    "message": "ê¹€ì›ì¹™ ë¶€ì†Œì¥ì—ê²Œ ì°¨ê¸° ì£¼ìš” ì‚¬ì—…ì˜ ì „ê¶Œì„ ìœ„ì„í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì´ ì‹ ë¢°ì— ë³´ë‹µí•˜ë“¯ ì™„ë²½í•œ ì„±ê³¼ë¥¼ ëƒˆê³ , ë³¸ë¶€ì—ì„œë„ ê·¹ì°¬í–ˆìŠµë‹ˆë‹¤.",
                    "stats": {
                        "project_success": 15,
                        "reputation": 10,
                        "staff_morale": 5
                    },
                    "deputy_morale": {
                        "principled": 15
                    },
                    "advance_time": False,
                    "next": None
                }
            }
        ],
        "ascii_art": "â­ ë¶€ì†Œì¥ ì¶©ì„±ë„ â­\n    ê¹€ì›ì¹™ ë¶€ì†Œì¥\n      â”Œâ”€â”€â”€â”€â”€â”\n      â”‚ ğŸ’¼  â”‚\n      â”‚ ğŸ˜Š  â”‚\n      â””â”€â”€â”€â”€â”€â”˜\n    âœ¨ ì „í­ ì§€ì§€ âœ¨"
    },

    "deputy_principled_low_resignation": {
        "title": "âš ï¸ ê¹€ì›ì¹™ ë¶€ì†Œì¥ì˜ ì „ë³´ ì‹ ì²­",
        "description": "ë³¸ë¶€ì—ì„œ ê¸´ê¸‰ ì—°ë½ì´ ì™”ìŠµë‹ˆë‹¤. ê¹€ì›ì¹™ ë¶€ì†Œì¥ì´ ì „ë³´ ì‹ ì²­ì„œë¥¼ ì œì¶œí–ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŠ” \"ì†Œì¥ë‹˜ì˜ ë¦¬ë”ì‹­ ë°©ì‹ê³¼ ì œ ê°€ì¹˜ê´€ì´ ë§ì§€ ì•ŠëŠ” ê²ƒ ê°™ë‹¤\"ëŠ” ì‚¬ìœ ë¥¼ ì ì—ˆìŠµë‹ˆë‹¤.\n\ní˜„ì§€ ì§ì›ë“¤ ì‚¬ì´ì—ì„œë„ \"ë¶€ì†Œì¥ë‹˜ì´ ë– ë‚˜ì‹ ë‹¤\"ëŠ” ì†Œë¬¸ì´ ëŒë©´ì„œ ë¶ˆì•ˆê°ì´ ì»¤ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŒ€ë¡œ ë‘ë©´ ì¡°ì§ ë¶„ìœ„ê¸°ê°€ í¬ê²Œ ì•…í™”ë  ê²ƒì…ë‹ˆë‹¤.",
        "threshold_type": "principled",
        "threshold_value": -30,
        "one_time": True,
        "choices": [
            {
                "text": "ë¶€ì†Œì¥ê³¼ ì§„ì†”í•œ ëŒ€í™” ì‹œë„ - ì†Œí†µìœ¼ë¡œ í•´ê²°",
                "result": {
                    "message": "ë¶€ì†Œì¥ì„ ì°¾ì•„ê°€ ì§„ì†”í•œ ëŒ€í™”ë¥¼ ë‚˜ëˆ´ìŠµë‹ˆë‹¤. \"ì œê°€ ì†Œí†µì´ ë¶€ì¡±í–ˆìŠµë‹ˆë‹¤.\" ë‹¹ì‹ ì˜ ì†”ì§í•¨ì— ë¶€ì†Œì¥ë„ ë§ˆìŒì„ ì—´ì—ˆê³ , ì „ë³´ ì‹ ì²­ì„ ì² íšŒí–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê´€ê³„ íšŒë³µì—ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                    "stats": {
                        "staff_morale": 8,
                        "reputation": 3,
                        "stress": 12
                    },
                    "deputy_morale": {
                        "principled": 20
                    },
                    "advance_time": False,
                    "next": None
                }
            },
            {
                "text": "ì „ë³´ë¥¼ ìˆ˜ìš©í•˜ê³  ìƒˆ ë¶€ì†Œì¥ ì˜ì…",
                "result": {
                    "message": "ë¶€ì†Œì¥ì˜ ì „ë³´ë¥¼ ë°›ì•„ë“¤ì˜€ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ë¶€ì†Œì¥ì´ ì™”ì§€ë§Œ, ì¡°ì§ì—ëŠ” \"ì†Œì¥ë‹˜ì´ ì‚¬ëŒì„ ë²„ë ¸ë‹¤\"ëŠ” ì¸ì‹ì´ í¼ì¡Œê³ , ì§ì›ë“¤ì˜ ì‹ ë¢°ê°€ í¬ê²Œ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.",
                    "stats": {
                        "staff_morale": -18,
                        "reputation": -12,
                        "project_success": -12,
                        "stress": 8
                    },
                    "deputy_morale": {
                        "principled": 0,
                        "local_friendly": 0
                    },
                    "advance_time": False,
                    "next": None
                }
            }
        ],
        "ascii_art": "âš ï¸ ìœ„ê¸° ìƒí™© âš ï¸\n      ğŸ“‹ ì „ë³´ì‹ ì²­ì„œ\n      â”Œâ”€â”€â”€â”€â”€â”\n      â”‚ ğŸ˜  â”‚\n      â””â”€â”€â”€â”€â”€â”˜\n    ê´€ê³„ íšŒë³µ í•„ìš”"
    },

    "deputy_local_friendly_network_bonus": {
        "title": "ğŸŒ ë°•í˜„ì§€ ë¶€ì†Œì¥ì˜ ë„¤íŠ¸ì›Œí¬ íš¨ê³¼",
        "description": "ë°•í˜„ì§€ ë¶€ì†Œì¥ì´ ê·¸ë™ì•ˆ ìŒ“ì•„ì˜¨ í˜„ì§€ ë„¤íŠ¸ì›Œí¬ê°€ ë¹›ì„ ë°œí•˜ëŠ” ìˆœê°„ì…ë‹ˆë‹¤. í˜„ì§€ ì •ë¶€ ê³ ìœ„ ê´€ë£Œê°€ ë¹„ê³µì‹ ë£¨íŠ¸ë¡œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.\n\n\"ë‹¤ìŒ ì£¼ ì •ë¶€ ì˜ˆì‚° ì‹¬ì˜ì—ì„œ ìš°ë¦¬ ì‚¬ì—…ì´ ëª¨ë¸ ì¼€ì´ìŠ¤ë¡œ ê±°ë¡ ë  ì˜ˆì •ì…ë‹ˆë‹¤. ì§€ê¸ˆ ì¶”ê°€ ì œì•ˆì„ í•˜ì‹œë©´ ìŠ¹ì¸ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.\"\n\në°•í˜„ì§€ ë¶€ì†Œì¥ì´ ë§í•©ë‹ˆë‹¤. \"ì†Œì¥ë‹˜, ì§€ê¸ˆì´ ì ˆí˜¸ì˜ ê¸°íšŒì…ë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\"",
        "threshold_type": "local_friendly",
        "threshold_value": 50,
        "one_time": True,
        "choices": [
            {
                "text": "ì¦‰ì‹œ ì¶”ê°€ ì‚¬ì—… ì œì•ˆì„œ ì œì¶œ - ê¸°íšŒ í¬ì°©",
                "result": {
                    "message": "ë°¤ì„ ìƒˆì›Œ ì¶”ê°€ ì œì•ˆì„œë¥¼ ì‘ì„±í•´ ì œì¶œí–ˆìŠµë‹ˆë‹¤. ì¼ì£¼ì¼ í›„, ì •ë¶€ë¡œë¶€í„° ì‚¬ì—… í™•ëŒ€ ìŠ¹ì¸ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤. ë°•í˜„ì§€ ë¶€ì†Œì¥ì˜ ë„¤íŠ¸ì›Œí¬ê°€ ë§Œë“  ê¸°ì ì…ë‹ˆë‹¤.",
                    "stats": {
                        "project_success": 20,
                        "reputation": 15,
                        "budget": 25,
                        "staff_morale": -8,
                        "stress": 15
                    },
                    "deputy_morale": {
                        "local_friendly": 15
                    },
                    "advance_time": False,
                    "next": None
                }
            },
            {
                "text": "ë¶€ì†Œì¥ì—ê²Œ ê°ì‚¬í•˜ê³  ë‹¤ìŒ ê¸°íšŒë¥¼ ì¤€ë¹„",
                "result": {
                    "message": "\"ì´ë²ˆì—” ì¤€ë¹„ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. ë‹¤ìŒ ê¸°íšŒë¥¼ ë” ì˜ ì¤€ë¹„í•˜ì£ .\" ë°•í˜„ì§€ ë¶€ì†Œì¥ì´ ì´í•´í•˜ë©° ê³ ê°œë¥¼ ë„ë•ì…ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ì•Šì€ í˜„ëª…í•œ íŒë‹¨ì´ì—ˆìŠµë‹ˆë‹¤.",
                    "stats": {
                        "staff_morale": 5,
                        "reputation": 3
                    },
                    "deputy_morale": {
                        "local_friendly": 5
                    },
                    "advance_time": False,
                    "next": None
                }
            }
        ],
        "ascii_art": "ğŸŒ ë„¤íŠ¸ì›Œí¬ íš¨ê³¼ ğŸŒ\n    ë°•í˜„ì§€ ë¶€ì†Œì¥\n      â”Œâ”€â”€â”€â”€â”€â”\n      â”‚ ğŸ’¼  â”‚\n      â”‚ ğŸ¤  â”‚\n      â””â”€â”€â”€â”€â”€â”˜\n    ê´€ê³„ì˜ í˜ ë°œíœ˜"
    },

    "deputy_local_friendly_cultural_crisis": {
        "title": "ğŸ”¥ ë°•í˜„ì§€ ë¶€ì†Œì¥ì˜ ë¬¸í™”ì  ê°ˆë“±",
        "description": "ë°•í˜„ì§€ ë¶€ì†Œì¥ì´ í˜„ì§€ íŒŒíŠ¸ë„ˆë“¤ê³¼ ë„ˆë¬´ ê°€ê¹Œì›Œì§€ë©´ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë³¸ë¶€ ê°ì‚¬íŒ€ì—ì„œ ì—°ë½ì´ ì™”ìŠµë‹ˆë‹¤.\n\n\"ë°•í˜„ì§€ ë¶€ì†Œì¥ì´ í˜„ì§€ ì—…ì²´ ëŒ€í‘œì™€ ì‚¬ì  ë§Œë‚¨ì´ ì¦ë‹¤ëŠ” ì œë³´ê°€ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. ì´í•´ ì¶©ëŒ ì˜í˜¹ì´ ìˆìœ¼ë‹ˆ ì¡°ì‚¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.\"\n\në°•í˜„ì§€ ë¶€ì†Œì¥ì€ ì–µìš¸í•´í•©ë‹ˆë‹¤. \"í˜„ì§€ì—ì„œëŠ” ì´ê²Œ ì •ìƒì ì¸ ê´€ê³„ êµ¬ì¶•ì…ë‹ˆë‹¤. ì˜¤í•´ì…ë‹ˆë‹¤!\" í•˜ì§€ë§Œ ë³¸ë¶€ëŠ” ì›ì¹™ì„ ìš”êµ¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
        "threshold_type": "local_friendly",
        "threshold_value": -30,
        "one_time": True,
        "choices": [
            {
                "text": "ë¶€ì†Œì¥ ì˜¹í˜¸ - ë¬¸í™” ì°¨ì´ ì„¤ëª…",
                "result": {
                    "message": "ë³¸ë¶€ì— í˜„ì§€ ë¬¸í™”ë¥¼ ì„¤ëª…í•˜ê³  ë¶€ì†Œì¥ì„ ì ê·¹ ì˜¹í˜¸í–ˆìŠµë‹ˆë‹¤. ì¡°ì‚¬ ê²°ê³¼ ë¬¸ì œê°€ ì—†ì—ˆê³ , ë°•í˜„ì§€ ë¶€ì†Œì¥ì€ ê°ì‚¬í–ˆì§€ë§Œ ë³¸ë¶€ëŠ” ë‹¹ì‹ ì˜ 'ëŠìŠ¨í•œ ê´€ë¦¬'ë¥¼ ìš°ë ¤í•©ë‹ˆë‹¤.",
                    "stats": {
                        "staff_morale": 10,
                        "reputation": -12,
                        "project_success": 3
                    },
                    "deputy_morale": {
                        "local_friendly": 15
                    },
                    "advance_time": False,
                    "next": None
                }
            },
            {
                "text": "ì›ì¹™ ì¤€ìˆ˜ - ë¶€ì†Œì¥ì—ê²Œ ê²½ê³  ë° í–‰ë™ ìˆ˜ì • ìš”êµ¬",
                "result": {
                    "message": "ë¶€ì†Œì¥ì—ê²Œ ë³¸ë¶€ ê·œì •ì„ ìƒê¸°ì‹œí‚¤ê³  í–‰ë™ ìˆ˜ì •ì„ ìš”êµ¬í–ˆìŠµë‹ˆë‹¤. ê·¸ëŠ” ì„œìš´í•´í–ˆì§€ë§Œ ë”°ëê³ , ë³¸ë¶€ëŠ” ë‹¹ì‹ ì˜ ì›ì¹™ì  ëŒ€ì‘ì„ ë†’ì´ í‰ê°€í–ˆìŠµë‹ˆë‹¤.",
                    "stats": {
                        "reputation": 10,
                        "staff_morale": -8,
                        "project_success": -6
                    },
                    "deputy_morale": {
                        "local_friendly": -10,
                        "principled": 5
                    },
                    "advance_time": False,
                    "next": None
                }
            }
        ],
        "ascii_art": "ğŸ”¥ ê°ˆë“± ìƒí™© ğŸ”¥\n      âš–ï¸ ë¬¸í™” vs ì›ì¹™\n      â”Œâ”€â”€â”€â”€â”€â”\n      â”‚ ğŸ˜°  â”‚\n      â””â”€â”€â”€â”€â”€â”˜\n    ì–´ë ¤ìš´ ì„ íƒ"
    }
}


# ============================================================
# 2. ìƒˆë¡œìš´ ì—”ë”© ì¡°ê±´ ë° ì‹œë‚˜ë¦¬ì˜¤
# ============================================================

NEW_ENDINGS = {
    "ending_perfect_balance": {
        "title": "ğŸ‘‘ ì™„ë²½í•œ ê· í˜•ì˜ ë¦¬ë”",
        "description": """2ë…„ì˜ ì„ê¸°ê°€ ëë‚¬ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì€ ê¸°ì ì„ ë§Œë“¤ì–´ëƒˆìŠµë‹ˆë‹¤.

**ìµœì¢… ì„±ê³¼:**
- í‰íŒ: ìµœê³  ìˆ˜ì¤€
- ì‚¬ì—… ì„±ê³¼: ëª¨ë“  í”„ë¡œì íŠ¸ ì„±ê³µ
- ì§ì› ì‚¬ê¸°: íŒ€ì˜ ì‹ ë¢°ì™€ ì¡´ê²½
- ì˜ˆì‚°: íš¨ìœ¨ì  ì§‘í–‰
- ë¶€ì†Œì¥ë“¤: ì–‘ì¸¡ ëª¨ë‘ì˜ ì§€ì§€

ë³¸ë¶€ ì´ì‚¬ì¥ì´ ì§ì ‘ ì „í™”ë¥¼ ê±¸ì–´ì™”ìŠµë‹ˆë‹¤. "ì†Œì¥ë‹˜, ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤. ë³¸ë¶€ì™€ í˜„ì§€, ì„±ê³¼ì™€ ì‚¬ëŒ, ì›ì¹™ê³¼ ìœ ì—°ì„± ì‚¬ì´ì—ì„œ ì™„ë²½í•œ ê· í˜•ì„ ì°¾ìœ¼ì…¨ìŠµë‹ˆë‹¤. ì°¨ê¸° ë³¸ë¶€ ì´ì‚¬ë¡œ ëª¨ì‹œê³  ì‹¶ìŠµë‹ˆë‹¤."

í˜„ì§€ ì •ë¶€ ì¥ê´€ì´ ë§í•©ë‹ˆë‹¤. "ë‹¹ì‹  ê°™ì€ íŒŒíŠ¸ë„ˆëŠ” ì²˜ìŒì…ë‹ˆë‹¤. ë‹¹ì‹  ë•ë¶„ì— ìš°ë¦¬ êµ­ê°€ê°€ ë°œì „í–ˆìŠµë‹ˆë‹¤."

ì§ì›ë“¤ì´ ëˆˆë¬¼ì„ í˜ë¦¬ë©° ì†¡ë³„íšŒë¥¼ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤. "ì†Œì¥ë‹˜ì´ ì•„ë‹ˆì—ˆë‹¤ë©´ ìš°ë¦¬ëŠ” ì´ë ‡ê²Œ ì„±ì¥í•˜ì§€ ëª»í–ˆì„ ê²ë‹ˆë‹¤."

**ë‹¹ì‹ ì€ KOICA ì—­ì‚¬ì— ë‚¨ì„ ì „ì„¤ì ì¸ ì†Œì¥ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.**

ê·€êµ­ í›„, ë‹¹ì‹ ì€ ë³¸ë¶€ ì´ì‚¬ë¡œ ìŠ¹ì§„í•˜ì—¬ ë” ë§ì€ í•´ì™¸ì‚¬ë¬´ì†Œë¥¼ ì´ë„ëŠ” ë¦¬ë”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ë¦¬ë”ì‹­ ì² í•™ì€ KOICAì˜ ìƒˆë¡œìš´ í‘œì¤€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.""",
        "ascii_art": "ğŸ‘‘ ì™„ë²½í•œ ê· í˜• ğŸ‘‘\n      âš–ï¸\n    â”Œâ”€â”€â”€â”€â”€â”\n    â”‚ ğŸ†  â”‚\n    â”‚ ğŸŒŸ  â”‚\n    â””â”€â”€â”€â”€â”€â”˜\n  ì „ì„¤ì  ë¦¬ë”ì‹­",
        "stats_display": True,
        "ending_type": "perfect"
    },

    "ending_burnout": {
        "title": "ğŸ’” ë²ˆì•„ì›ƒìœ¼ë¡œ ì¡°ê¸° ê·€êµ­",
        "description": """ë” ì´ìƒ ë²„í‹¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**ë‹¹ì‹ ì˜ ìƒíƒœ:**
- ìŠ¤íŠ¸ë ˆìŠ¤: í•œê³„ ì´ˆê³¼
- ì›°ë¹™: ê±´ê°• ì‹¬ê°
- ìˆ˜ë©´: ê±°ì˜ ì—†ìŒ
- íŒë‹¨ë ¥: ì €í•˜

ì–´ëŠ ë‚  ì•„ì¹¨, ì¹¨ëŒ€ì—ì„œ ì¼ì–´ë‚  ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. ë³‘ì› ì§„ë‹¨ ê²°ê³¼ëŠ” 'ì‹¬ê°í•œ ë²ˆì•„ì›ƒ ì¦í›„êµ°'. ì˜ì‚¬ê°€ ë§í•©ë‹ˆë‹¤. "ì¦‰ì‹œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ê³„ì† ì¼í•˜ë©´ ìƒëª…ì´ ìœ„í—˜í•©ë‹ˆë‹¤."

ë³¸ë¶€ì—ì„œ ê¸´ê¸‰ ì†Œí™˜ ëª…ë ¹ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤. í›„ì„ìê°€ ê¸‰íˆ íŒŒê²¬ë˜ì—ˆê³ , ë‹¹ì‹ ì€ ì œëŒ€ë¡œ ì¸ìˆ˜ì¸ê³„ë„ ëª»í•œ ì±„ í•œêµ­ìœ¼ë¡œ ëŒì•„ì™”ìŠµë‹ˆë‹¤.

ì§ì›ë“¤ì´ ê³µí•­ê¹Œì§€ ë°°ì›…ì„ ë‚˜ì™”ì§€ë§Œ, ë‹¹ì‹ ì€ ê·¸ë“¤ì„ ë˜‘ë°”ë¡œ ë³¼ ìˆ˜ ì—†ì—ˆìŠµë‹ˆë‹¤. "ì œê°€ ë” ì˜í–ˆì–´ì•¼ í–ˆëŠ”ë°..."

**6ê°œì›”ê°„ì˜ ì¹˜ë£Œ í›„, ë‹¹ì‹ ì€ KOICAë¥¼ ë– ë‚˜ ì‘ì€ NGOì—ì„œ ìƒˆ ì¶œë°œì„ í–ˆìŠµë‹ˆë‹¤.**

ëŒì´ì¼œë³´ë©´, 'ëª¨ë“  ê²ƒì„ ì™„ë²½í•˜ê²Œ' í•˜ë ¤ë˜ ìš•ì‹¬ì´ í™”ê·¼ì´ì—ˆìŠµë‹ˆë‹¤. ë•Œë¡œëŠ” 'ì ë‹¹íˆ'ë„ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ë„ˆë¬´ ëŠ¦ê²Œ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.""",
        "ascii_art": "ğŸ’” ë²ˆì•„ì›ƒ ğŸ’”\n      ğŸ˜°\n    â”Œâ”€â”€â”€â”€â”€â”\n    â”‚ ğŸ’Š  â”‚\n    â”‚ ğŸ¥  â”‚\n    â””â”€â”€â”€â”€â”€â”˜\n  ê±´ê°• ìµœìš°ì„ ",
        "ending_type": "bad",
        "forced": True
    },

    "ending_reputation_collapse": {
        "title": "ğŸ“‰ í‰íŒ ì¶”ë½ìœ¼ë¡œ ê²½ì§ˆ",
        "description": """ë³¸ë¶€ì—ì„œ ê¸´ê¸‰ ì†Œí™˜ ëª…ë ¹ì´ ë–¨ì–´ì¡ŒìŠµë‹ˆë‹¤.

**ìƒí™©:**
- í‰íŒ: íšŒë³µ ë¶ˆê°€ëŠ¥í•œ ìˆ˜ì¤€
- í˜„ì§€ ì •ë¶€: ì‹ ë¢° ìƒì‹¤
- ë³¸ë¶€: ì‹¤ë§ê³¼ ë¶„ë…¸
- ì–¸ë¡ : ë¶€ì •ì  ë³´ë„

ë³¸ë¶€ íšŒì˜ì‹¤. ì´ì‚¬ì¥ì´ ì°¨ê°‘ê²Œ ë§í•©ë‹ˆë‹¤. "ì†Œì¥ë‹˜, ë” ì´ìƒ í˜„ì¥ì— ê³„ì‹¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê·€êµ­í•˜ì‹­ì‹œì˜¤."

í˜„ì§€ ì–¸ë¡ ì´ ëŒ€ì„œíŠ¹í•„í–ˆìŠµë‹ˆë‹¤. "KOICA ì†Œì¥ ê²½ì§ˆ, ì™¸êµì  ì°¸ì‚¬"

ë‹¹ì‹ ì´ ìŒ“ì•„ì˜¨ ëª¨ë“  ê²ƒì´ ë¬´ë„ˆì¡ŒìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ëŠ” ì¤‘ë‹¨ë˜ì—ˆê³ , ì§ì›ë“¤ì€ ë¿”ë¿”ì´ í©ì–´ì¡Œìœ¼ë©°, íŒŒíŠ¸ë„ˆë“¤ì€ ë“±ì„ ëŒë ¸ìŠµë‹ˆë‹¤.

ê·€êµ­ í›„, ë‹¹ì‹ ì€ ë³¸ë¶€ í•œ êµ¬ì„ì˜ ìë£Œì‹¤ë¡œ ë°œë ¹ë°›ì•˜ìŠµë‹ˆë‹¤. ì•„ë¬´ë„ ë‹¹ì‹ ê³¼ ì´ì•¼ê¸°í•˜ë ¤ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**1ë…„ í›„, ë‹¹ì‹ ì€ ì¡°ìš©íˆ ì‚¬ì§ì„œë¥¼ ì œì¶œí–ˆìŠµë‹ˆë‹¤.**

ë¬´ì—‡ì´ ì˜ëª»ë˜ì—ˆì„ê¹Œìš”? ëŒì´ì¼œë³´ë©´, ì¤‘ìš”í•œ ìˆœê°„ë§ˆë‹¤ ì˜ëª»ëœ ì„ íƒì„ í–ˆìŠµë‹ˆë‹¤. í‰íŒì€ í•œë²ˆ ë¬´ë„ˆì§€ë©´ íšŒë³µí•˜ê¸° ì–´ë µë‹¤ëŠ” ê²ƒì„ ë°°ì› ì§€ë§Œ, ì´ë¯¸ ëŠ¦ì—ˆìŠµë‹ˆë‹¤.""",
        "ascii_art": "ğŸ“‰ í‰íŒ ì¶”ë½ ğŸ“‰\n      ğŸ˜”\n    â”Œâ”€â”€â”€â”€â”€â”\n    â”‚ âŒ  â”‚\n    â”‚ ğŸ“°  â”‚\n    â””â”€â”€â”€â”€â”€â”˜\n  ì‹ ë¢°ì˜ ì¤‘ìš”ì„±",
        "ending_type": "bad",
        "forced": True
    },

    "ending_ethical_crisis": {
        "title": "âš–ï¸ ìœ¤ë¦¬ ìœ„ë°˜ìœ¼ë¡œ ì§•ê³„",
        "description": """ë³¸ë¶€ ê°ì‚¬íŒ€ì´ ë‹¹ì‹ ì„ ì†Œí™˜í–ˆìŠµë‹ˆë‹¤.

**ê°ì‚¬ ê²°ê³¼:**
- ë‹¤ìˆ˜ì˜ ìœ¤ë¦¬ ìœ„ë°˜ ì‚¬ë¡€ ë°œê²¬
- ë¶€ì ì ˆí•œ ì˜ì‚¬ê²°ì • íŒ¨í„´
- ë¶€íŒ¨ ë°©ì¡° í˜ì˜

"ì†Œì¥ë‹˜, ì—¬ëŸ¬ ì°¨ë¡€ ë¶€ì ì ˆí•œ ê²°ì •ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤. íŠ¹íˆ ë¶€íŒ¨ ì‚¬ë¡€ë¥¼ ì œëŒ€ë¡œ ì²˜ë¦¬í•˜ì§€ ì•Šì€ ê²ƒì€ ì‹¬ê°í•œ ë¬¸ì œì…ë‹ˆë‹¤."

ê°ì‚¬ê´€ì´ ì°¨ê°‘ê²Œ ë§í•©ë‹ˆë‹¤. "KOICAì˜ í•µì‹¬ ê°€ì¹˜ëŠ” íˆ¬ëª…ì„±ê³¼ ì±…ì„ì„±ì…ë‹ˆë‹¤. ì†Œì¥ë‹˜ì˜ í–‰ë™ì€ ì´ì— ì •ë©´ìœ¼ë¡œ ìœ„ë°°ë©ë‹ˆë‹¤."

**ì§•ê³„ ê²°ê³¼: ì§ìœ„ í•´ì œ ë° 3ê°œì›” ì •ì§**

í˜„ì§€ íŒŒíŠ¸ë„ˆë“¤ì€ "ê·¸ë˜ë„ ìš°ë¦¬ë¥¼ ì´í•´í•´ì¤€ ìœ ì¼í•œ ì‚¬ëŒì´ì—ˆë‹¤"ë©° ì•„ì‰¬ì›Œí–ˆì§€ë§Œ, ë³¸ë¶€ì˜ ê²°ì •ì€ í™•ê³ í–ˆìŠµë‹ˆë‹¤.

ì •ì§ ê¸°ê°„ ë™ì•ˆ, ë‹¹ì‹ ì€ ë§ì€ ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤. 'í˜„ì§€ ê´€í–‰'ê³¼ 'ì›ì¹™' ì‚¬ì´ì—ì„œ íƒ€í˜‘í–ˆë˜ ìˆœê°„ë“¤ì´ ì£¼ë§ˆë“±ì²˜ëŸ¼ ìŠ¤ì³ ì§€ë‚˜ê°”ìŠµë‹ˆë‹¤.

**6ê°œì›” í›„, ë‹¹ì‹ ì€ ì¡°ìš©íˆ ì‚¬í‘œë¥¼ ì œì¶œí–ˆìŠµë‹ˆë‹¤.**

"ì›ì¹™ì€ ë¶ˆí¸í•˜ì§€ë§Œ, ì§€í‚¤ì§€ ì•Šìœ¼ë©´ ëª¨ë“  ê²ƒì„ ìƒëŠ”ë‹¤"ëŠ” êµí›ˆì„ ì–»ì—ˆì§€ë§Œ, ëŒ€ê°€ê°€ ë„ˆë¬´ ì»¸ìŠµë‹ˆë‹¤.""",
        "ascii_art": "âš–ï¸ ìœ¤ë¦¬ ìœ„ë°˜ âš–ï¸\n      ğŸ˜\n    â”Œâ”€â”€â”€â”€â”€â”\n    â”‚ âš ï¸  â”‚\n    â”‚ ğŸ“‹  â”‚\n    â””â”€â”€â”€â”€â”€â”˜\n  ì›ì¹™ì˜ ì¤‘ìš”ì„±",
        "ending_type": "bad",
        "forced": True
    }
}


# ============================================================
# 3. ì¥ê¸° ì˜í–¥(delayed effects)ì„ ê°€ì§„ ì‹œë‚˜ë¦¬ì˜¤ ìˆ˜ì •
# ============================================================

def add_delayed_effects(scenarios):
    """ê¸°ì¡´ ì‹œë‚˜ë¦¬ì˜¤ì— ì¥ê¸° ì˜í–¥ ì¶”ê°€"""

    # period_5 NGO ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• ì„ íƒì§€ì— ì¥ê¸° íš¨ê³¼ ì¶”ê°€
    if 'period_5' in scenarios:
        # NGO ë„¤íŠ¸ì›Œí¬ êµ¬ì¶• ì„ íƒì§€ (ì¸ë±ìŠ¤ 2)
        scenarios['period_5']['choices'][2]['result']['delayed_effects'] = [
            {
                "trigger_period": 10,  # 2ë…„ì°¨ 4-5ì›”
                "condition": "project_success >= 50",
                "message": "ğŸŒŸ 9ê°œì›” ì „ êµ¬ì¶•í•œ NGO ë„¤íŠ¸ì›Œí¬ê°€ ë¹›ì„ ë°œí•©ë‹ˆë‹¤! 5ê°œ NGOê°€ ê³µë™ìœ¼ë¡œ ìƒˆë¡œìš´ ì‚¬ì—…ì„ ì œì•ˆí–ˆê³ , í˜„ì§€ ì •ë¶€ë„ ì ê·¹ ì§€ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. 'ì¥ê¸° íˆ¬ì'ê°€ ê²°ì‹¤ì„ ë§ºëŠ” ìˆœê°„ì…ë‹ˆë‹¤.",
                "stats": {
                    "reputation": 12,
                    "project_success": 10,
                    "budget": 15
                },
                "effect_id": "ngo_network_payoff"
            }
        ]

    # period_2 PMC ììœ¨ì„± ë¶€ì—¬ ì„ íƒì§€ì— ë¦¬ìŠ¤í¬ ì¶”ê°€
    if 'period_2' in scenarios:
        # PMC ì „ë¬¸ì„± ì‹ ë¢° ì„ íƒì§€ (ì¸ë±ìŠ¤ 0)
        scenarios['period_2']['choices'][0]['result']['delayed_effects'] = [
            {
                "trigger_period": 6,  # 1ë…„ì°¨ 11-12ì›”
                "condition": "random < 0.3",  # 30% í™•ë¥ 
                "message": "âš ï¸ PMCê°€ ì‚¬ë¬´ì†Œì™€ ì¶©ë¶„í•œ í˜‘ì˜ ì—†ì´ ì‚¬ì—… ë°©í–¥ì„ ì¼ë¶€ ë³€ê²½í–ˆìŠµë‹ˆë‹¤. ì „ë¬¸ì„±ì€ ë†’ì§€ë§Œ, ì´ˆê¸°ì— ë¶€ì—¬í•œ 'ê³¼ë„í•œ ììœ¨ì„±'ì´ í†µì œë ¥ ìƒì‹¤ë¡œ ì´ì–´ì§„ ê²ƒì…ë‹ˆë‹¤. í˜„ì§€ ì •ë¶€ê°€ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•˜ê³  ìˆìŠµë‹ˆë‹¤.",
                "stats": {
                    "reputation": -8,
                    "project_success": -6,
                    "stress": 12
                },
                "effect_id": "pmc_autonomy_risk"
            }
        ]

    # period_8 ë‚´ë¶€ ì‹œìŠ¤í…œ ê°œì„ ì˜ ì¥ê¸° íš¨ê³¼
    if 'period_8' in scenarios:
        # ì œ3ì ê°ì‚¬ + ì‹œìŠ¤í…œ ê°œì„  ì„ íƒì§€ (ì¸ë±ìŠ¤ 3)
        if len(scenarios['period_8']['choices']) > 3:
            scenarios['period_8']['choices'][3]['result']['delayed_effects'] = [
                {
                    "trigger_period": 11,  # 2ë…„ì°¨ 9-10ì›”
                    "condition": "always",
                    "message": "âœ… 1ë…„ ì „ êµ¬ì¶•í•œ ë‚´ë¶€ í†µì œ ì‹œìŠ¤í…œì´ ì™„ë²½í•˜ê²Œ ì‘ë™í•˜ê³  ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì‚¬ì—…ì´ íˆ¬ëª…í•˜ê²Œ ì§„í–‰ë˜ê³ , ë³¸ë¶€ ê°ì‚¬ì—ì„œë„ 'ëª¨ë²” ì‚¬ë¡€'ë¡œ ì„ ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ˆê¸° íˆ¬ìê°€ ì¥ê¸°ì ìœ¼ë¡œ í° ìì‚°ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.",
                    "stats": {
                        "reputation": 15,
                        "project_success": 8,
                        "staff_morale": 10
                    },
                    "effect_id": "internal_control_success"
                }
            ]

    # period_9 ì•ˆì „ ìœ„ê¸° - ì² ìˆ˜ ì„ íƒì˜ ì¥ê¸° ì˜í–¥
    if 'period_9' in scenarios:
        # ì¦‰ê° ì „ì› ì² ìˆ˜ ì„ íƒì§€ (ì¸ë±ìŠ¤ 0)
        scenarios['period_9']['choices'][0]['result']['delayed_effects'] = [
            {
                "trigger_period": 11,  # 2ë…„ì°¨ 9-10ì›”
                "condition": "reputation < 50",
                "message": "ğŸ’” ê³¼ê±° 'ê³¼ì‰ ì² ìˆ˜' ì‚¬ê±´ì˜ í›„ìœ ì¦ì´ ê³„ì†ë©ë‹ˆë‹¤. í˜„ì§€ íŒŒíŠ¸ë„ˆë“¤ì´ \"ë˜ ìœ„ê¸°ê°€ ì˜¤ë©´ ë„ë§ê°ˆ ì‚¬ëŒë“¤\"ì´ë¼ë©° í˜‘ë ¥ì„ êº¼ë¦¬ê³  ìˆìŠµë‹ˆë‹¤. í•œë²ˆ ìƒì€ ì‹ ë¢°ëŠ” ì‰½ê²Œ íšŒë³µë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
                "stats": {
                    "reputation": -10,
                    "project_success": -8
                },
                "effect_id": "evacuation_stigma"
            }
        ]

    return scenarios


def add_deputy_events_to_scenarios(scenarios):
    """ë¶€ì†Œì¥ ì„ê³„ê°’ ì´ë²¤íŠ¸ë¥¼ scenariosì— ì¶”ê°€"""
    scenarios.update(DEPUTY_THRESHOLD_EVENTS)
    return scenarios


def add_new_endings_to_scenarios(scenarios):
    """ìƒˆë¡œìš´ ì—”ë”©ì„ scenariosì— ì¶”ê°€"""
    scenarios.update(NEW_ENDINGS)
    return scenarios


def main():
    print("=" * 60)
    print("KOICA ì‹œë®¬ë ˆì´ì…˜ ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ ì‹œì‘")
    print("=" * 60)

    # ë°±ì—… ìƒì„±
    print("\nğŸ“ ê¸°ì¡´ íŒŒì¼ ë°±ì—… ì¤‘...")
    import shutil
    shutil.copy2('scenarios.json', 'scenarios.json.before_advanced')
    print("   âœ… ë°±ì—… ì™„ë£Œ: scenarios.json.before_advanced")

    # íŒŒì¼ ë¡œë“œ
    print("\nğŸ“– scenarios.json ë¡œë“œ ì¤‘...")
    scenarios = load_scenarios()
    print("   âœ… ë¡œë“œ ì™„ë£Œ")

    # ê³ ê¸‰ ê¸°ëŠ¥ ì¶”ê°€
    print("\nğŸ”§ ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ ì¤‘...")

    print("ğŸŒŸ 1. ë¶€ì†Œì¥ ì„ê³„ê°’ ì´ë²¤íŠ¸ ì¶”ê°€ ì¤‘...")
    scenarios = add_deputy_events_to_scenarios(scenarios)
    print(f"   âœ… {len(DEPUTY_THRESHOLD_EVENTS)}ê°œ ì´ë²¤íŠ¸ ì¶”ê°€ ì™„ë£Œ")

    print("ğŸ“Š 2. ì¥ê¸° ì˜í–¥ ì‹œìŠ¤í…œ ì¶”ê°€ ì¤‘...")
    scenarios = add_delayed_effects(scenarios)
    print("   âœ… delayed_effects ì¶”ê°€ ì™„ë£Œ")

    print("ğŸ† 3. ìƒˆë¡œìš´ ì—”ë”© ì¡°ê±´ ì¶”ê°€ ì¤‘...")
    scenarios = add_new_endings_to_scenarios(scenarios)
    print(f"   âœ… {len(NEW_ENDINGS)}ê°œ ì—”ë”© ì¶”ê°€ ì™„ë£Œ")

    # íŒŒì¼ ì €ì¥
    print("\nğŸ’¾ scenarios.json ì €ì¥ ì¤‘...")
    save_scenarios(scenarios)
    print("   âœ… ì €ì¥ ì™„ë£Œ")

    print("\n" + "=" * 60)
    print("âœ… ëª¨ë“  ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ!")
    print("=" * 60)
    print("\nì¶”ê°€ëœ ê¸°ëŠ¥:")
    print("  ğŸŒŸ ë¶€ì†Œì¥ ì„ê³„ê°’ ì´ë²¤íŠ¸:")
    print("     - ê¹€ì›ì¹™ ë¶€ì†Œì¥ ê³ ì¶©ì„±ë„ ì´ë²¤íŠ¸")
    print("     - ê¹€ì›ì¹™ ë¶€ì†Œì¥ ì „ë³´ ìœ„ê¸° ì´ë²¤íŠ¸")
    print("     - ë°•í˜„ì§€ ë¶€ì†Œì¥ ë„¤íŠ¸ì›Œí¬ ë³´ë„ˆìŠ¤ ì´ë²¤íŠ¸")
    print("     - ë°•í˜„ì§€ ë¶€ì†Œì¥ ë¬¸í™” ê°ˆë“± ì´ë²¤íŠ¸")
    print("\n  ğŸ“Š ì¥ê¸° ì˜í–¥ ì‹œìŠ¤í…œ:")
    print("     - period_5: NGO ë„¤íŠ¸ì›Œí¬ì˜ ì¥ê¸° íš¨ê³¼")
    print("     - period_2: PMC ììœ¨ì„±ì˜ ë¦¬ìŠ¤í¬")
    print("     - period_8: ì‹œìŠ¤í…œ ê°œì„ ì˜ ì¥ê¸° íš¨ê³¼")
    print("     - period_9: ì² ìˆ˜ ê²°ì •ì˜ ë‚™ì¸ íš¨ê³¼")
    print("\n  ğŸ† ìƒˆë¡œìš´ ì—”ë”©:")
    print("     - ending_perfect_balance: ì™„ë²½í•œ ê· í˜•ì˜ ë¦¬ë”")
    print("     - ending_burnout: ë²ˆì•„ì›ƒìœ¼ë¡œ ì¡°ê¸° ê·€êµ­")
    print("     - ending_reputation_collapse: í‰íŒ ì¶”ë½ ê²½ì§ˆ")
    print("     - ending_ethical_crisis: ìœ¤ë¦¬ ìœ„ë°˜ ì§•ê³„")

if __name__ == '__main__':
    main()
